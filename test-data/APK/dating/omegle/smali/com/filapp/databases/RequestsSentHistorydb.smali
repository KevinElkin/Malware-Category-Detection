.class public Lcom/filapp/databases/RequestsSentHistorydb;
.super Landroid/database/sqlite/SQLiteOpenHelper;
.source "RequestsSentHistorydb.java"


# instance fields
.field private database:Landroid/database/sqlite/SQLiteDatabase;

.field private tablename:Ljava/lang/String;


# direct methods
.method public constructor <init>(Landroid/content/Context;Ljava/lang/String;)V
    .locals 2

    .line 25
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    sget-object v1, Lcom/filapp/utils/Url;->databasepath:Ljava/lang/String;

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v1, "Solo"

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string p2, ".db"

    invoke-virtual {v0, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p2

    const/4 v0, 0x0

    const/4 v1, 0x1

    invoke-direct {p0, p1, p2, v0, v1}, Landroid/database/sqlite/SQLiteOpenHelper;-><init>(Landroid/content/Context;Ljava/lang/String;Landroid/database/sqlite/SQLiteDatabase$CursorFactory;I)V

    const-string p1, "daterequests"

    .line 22
    iput-object p1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->tablename:Ljava/lang/String;

    return-void
.end method


# virtual methods
.method public deleterequest(Ljava/lang/String;)V
    .locals 5

    .line 92
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 93
    iget-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->tablename:Ljava/lang/String;

    const-string v2, "serreqid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {v0, v1, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method

.method public getPendindCanceldateRequests(Ljava/lang/String;)Ljava/util/ArrayList;
    .locals 6
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/lang/String;",
            ")",
            "Ljava/util/ArrayList<",
            "Lcom/filapp/models/CancelDateRequest;",
            ">;"
        }
    .end annotation

    .line 97
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 98
    new-instance v0, Ljava/util/ArrayList;

    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V

    .line 99
    iget-object v1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    const-string v2, "SELECT * FROM daterequests WHERE deliverystatus=\'-3\'"

    const/4 v3, 0x0

    invoke-virtual {v1, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object v1

    .line 100
    invoke-interface {v1}, Landroid/database/Cursor;->moveToFirst()Z

    const/4 v2, 0x0

    .line 101
    :goto_0
    invoke-interface {v1}, Landroid/database/Cursor;->getCount()I

    move-result v3

    if-ge v2, v3, :cond_0

    .line 102
    new-instance v3, Lcom/filapp/models/CancelDateRequest;

    const/4 v4, 0x1

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v4

    const/4 v5, 0x2

    invoke-interface {v1, v5}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v5

    invoke-direct {v3, v4, p1, v5}, Lcom/filapp/models/CancelDateRequest;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V

    .line 103
    invoke-virtual {v0, v3}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    :cond_0
    return-object v0
.end method

.method public getPendingMessages(Ljava/lang/String;)Ljava/util/ArrayList;
    .locals 13
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ljava/lang/String;",
            ")",
            "Ljava/util/ArrayList<",
            "Lcom/filapp/events/DateRequestEvent;",
            ">;"
        }
    .end annotation

    .line 70
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 71
    new-instance v0, Ljava/util/ArrayList;

    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V

    .line 72
    iget-object v1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    const-string v2, "SELECT serreqid,hostid,status FROM daterequests WHERE deliverystatus=0"

    const/4 v3, 0x0

    invoke-virtual {v1, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object v1

    .line 73
    invoke-interface {v1}, Landroid/database/Cursor;->moveToFirst()Z

    const/4 v2, 0x0

    move v3, v2

    .line 74
    :goto_0
    invoke-interface {v1}, Landroid/database/Cursor;->getCount()I

    move-result v4

    if-ge v3, v4, :cond_0

    .line 75
    new-instance v4, Lcom/filapp/events/DateRequestEvent;

    const/4 v5, 0x1

    invoke-interface {v1, v5}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v7

    const-string v8, "0"

    invoke-static {}, Ljava/util/Calendar;->getInstance()Ljava/util/Calendar;

    move-result-object v5

    invoke-virtual {v5}, Ljava/util/Calendar;->getTimeInMillis()J

    move-result-wide v9

    invoke-interface {v1, v2}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v11

    const-string v12, "0"

    move-object v5, v4

    move-object v6, p1

    invoke-direct/range {v5 .. v12}, Lcom/filapp/events/DateRequestEvent;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;JLjava/lang/String;Ljava/lang/String;)V

    .line 76
    invoke-virtual {v0, v4}, Ljava/util/ArrayList;->add(Ljava/lang/Object;)Z

    .line 77
    invoke-interface {v1}, Landroid/database/Cursor;->moveToNext()Z

    add-int/lit8 v3, v3, 0x1

    goto :goto_0

    .line 79
    :cond_0
    invoke-interface {v1}, Landroid/database/Cursor;->close()V

    return-object v0
.end method

.method public getRequests(I)Landroid/database/Cursor;
    .locals 3

    .line 84
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 86
    iget-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "SELECT * FROM daterequests ORDER BY reqid DESC limit 20 OFFSET "

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p1

    const/4 v1, 0x0

    invoke-virtual {v0, p1, v1}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object p1

    return-object p1
.end method

.method public insertData(Lcom/filapp/events/DateRequestEvent;)Ljava/lang/String;
    .locals 4

    .line 43
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 44
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "serreqid"

    .line 45
    invoke-virtual {p1}, Lcom/filapp/events/DateRequestEvent;->getProcessid()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "hostid"

    .line 46
    invoke-virtual {p1}, Lcom/filapp/events/DateRequestEvent;->getHostid()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "status"

    const-string v2, "0"

    .line 47
    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "time"

    .line 48
    invoke-virtual {p1}, Lcom/filapp/events/DateRequestEvent;->getTime()J

    move-result-wide v2

    invoke-static {v2, v3}, Ljava/lang/Long;->valueOf(J)Ljava/lang/Long;

    move-result-object p1

    invoke-virtual {v0, v1, p1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Long;)V

    const-string p1, "deliverystatus"

    const-string v1, "0"

    .line 49
    invoke-virtual {v0, p1, v1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 50
    iget-object p1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->tablename:Ljava/lang/String;

    const/4 v2, 0x0

    invoke-virtual {p1, v1, v2, v0}, Landroid/database/sqlite/SQLiteDatabase;->insert(Ljava/lang/String;Ljava/lang/String;Landroid/content/ContentValues;)J

    move-result-wide v0

    invoke-static {v0, v1}, Ljava/lang/String;->valueOf(J)Ljava/lang/String;

    move-result-object p1

    return-object p1
.end method

.method public onCreate(Landroid/database/sqlite/SQLiteDatabase;)V
    .locals 1

    const-string v0, "CREATE table allchats(chatid INTEGER PRIMARY KEY AUTOINCREMENT,servchatid text,senderid text,receiverid text,active text NOT NULL DEFAULT \'0\',notifications INTEGER NOT NULL DEFAULT 0,time text,background text  NOT NULL DEFAULT \'0\',ismute text  NOT NULL DEFAULT \'0\',isrevealed text  NOT NULL DEFAULT \'0\',username text  NOT NULL DEFAULT \'0\',profilepicid text  NOT NULL DEFAULT \'0\',lastmessage text NOT NULL DEFAULT \'\',lastmsgtime text,isdeleted NOT NULL DEFAULT \'0\')"

    .line 30
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    const-string v0, "CREATE table messages(msgid INTEGER PRIMARY KEY AUTOINCREMENT,servmsgid text,chatid text,mymessage text,senderid text,receiverid text,deliverystatus text,msgtype text,time text,deliverytime text,readtimetext)"

    .line 31
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    const-string v0, "CREATE table notifications(notid INTEGER PRIMARY KEY AUTOINCREMENT,serrequestid text,hostuserid text,nottype text,nottime text,isread INTEGER NOT NULL DEFAULT 0,isclicked INTEGER NOT NULL DEFAULT 0,username text  NOT NULL DEFAULT \'0\',profilepicid text  NOT NULL DEFAULT \'0\')"

    .line 32
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    const-string v0, "CREATE table daterequests(reqid INTEGER PRIMARY KEY AUTOINCREMENT,serreqid text,hostid text,status text,deliverystatus text,time text)"

    .line 33
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    return-void
.end method

.method public onUpgrade(Landroid/database/sqlite/SQLiteDatabase;II)V
    .locals 0

    return-void
.end method

.method public updaterequesttodelivered(Ljava/lang/String;I)V
    .locals 5

    .line 63
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 64
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "deliverystatus"

    .line 65
    invoke-static {p2}, Ljava/lang/String;->valueOf(I)Ljava/lang/String;

    move-result-object p2

    invoke-virtual {v0, v1, p2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 66
    iget-object p2, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->tablename:Ljava/lang/String;

    const-string v2, "serreqid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {p2, v1, v0, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method

.method public updaterequesttosent(Ljava/lang/String;Ljava/lang/String;)V
    .locals 5

    .line 55
    invoke-virtual {p0}, Lcom/filapp/databases/RequestsSentHistorydb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 56
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "serreqid"

    .line 57
    invoke-virtual {v0, v1, p2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string p2, "deliverystatus"

    const-string v1, "1"

    .line 58
    invoke-virtual {v0, p2, v1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 59
    iget-object p2, p0, Lcom/filapp/databases/RequestsSentHistorydb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/RequestsSentHistorydb;->tablename:Ljava/lang/String;

    const-string v2, "serreqid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {p2, v1, v0, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method
