.class public Lcom/filapp/databases/Messagesdb;
.super Landroid/database/sqlite/SQLiteOpenHelper;
.source "Messagesdb.java"


# instance fields
.field MYTAG:Ljava/lang/String;

.field database:Landroid/database/sqlite/SQLiteDatabase;

.field private mypassword:Ljava/lang/String;

.field private table:Ljava/lang/String;


# direct methods
.method public constructor <init>(Landroid/content/Context;Ljava/lang/String;)V
    .locals 2

    .line 29
    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    sget-object v1, Lcom/filapp/utils/Url;->databasepath:Ljava/lang/String;

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v1, "Solo"

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string p2, ".db"

    invoke-virtual {v0, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p2

    const/4 v0, 0x0

    const/4 v1, 0x1

    invoke-direct {p0, p1, p2, v0, v1}, Landroid/database/sqlite/SQLiteOpenHelper;-><init>(Landroid/content/Context;Ljava/lang/String;Landroid/database/sqlite/SQLiteDatabase$CursorFactory;I)V

    const-string p1, "BLINDDATEDATABASE"

    .line 24
    iput-object p1, p0, Lcom/filapp/databases/Messagesdb;->mypassword:Ljava/lang/String;

    const-string p1, "DATABASE"

    .line 25
    iput-object p1, p0, Lcom/filapp/databases/Messagesdb;->MYTAG:Ljava/lang/String;

    const-string p1, "messages"

    .line 26
    iput-object p1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    return-void
.end method


# virtual methods
.method public clearchat(Ljava/lang/String;)V
    .locals 5

    .line 88
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 89
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v2, "chatid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {v0, v1, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I

    .line 90
    iget-object p1, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    invoke-virtual {p1}, Landroid/database/sqlite/SQLiteDatabase;->close()V

    return-void
.end method

.method public deleteitem(Ljava/lang/String;)V
    .locals 5

    .line 94
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 95
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v2, "servmsgid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    invoke-static {p1}, Ljava/lang/String;->valueOf(Ljava/lang/Object;)Ljava/lang/String;

    move-result-object p1

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {v0, v1, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->delete(Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)I

    .line 96
    iget-object p1, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    invoke-virtual {p1}, Landroid/database/sqlite/SQLiteDatabase;->close()V

    return-void
.end method

.method public getData(ILjava/lang/String;)Landroid/database/Cursor;
    .locals 3

    .line 80
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 81
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "SELECT * FROM messages WHERE chatid=\'"

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string p2, "\' ORDER BY msgid DESC limit 30 OFFSET "

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p1

    const/4 p2, 0x0

    invoke-virtual {v0, p1, p2}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object p1

    return-object p1
.end method

.method public getPendingMessages()Ljava/util/List;
    .locals 13
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Ljava/util/List<",
            "Lcom/filapp/models/Message;",
            ">;"
        }
    .end annotation

    .line 100
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 101
    new-instance v0, Ljava/util/ArrayList;

    invoke-direct {v0}, Ljava/util/ArrayList;-><init>()V

    .line 102
    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    const-string v2, "SELECT * FROM messages WHERE deliverystatus=\'0\'"

    const/4 v3, 0x0

    invoke-virtual {v1, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object v1

    .line 103
    invoke-interface {v1}, Landroid/database/Cursor;->moveToFirst()Z

    const/4 v2, 0x0

    .line 104
    :goto_0
    invoke-interface {v1}, Landroid/database/Cursor;->getCount()I

    move-result v3

    if-ge v2, v3, :cond_0

    .line 105
    new-instance v3, Lcom/filapp/models/Message;

    const/4 v4, 0x1

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v5

    const/4 v4, 0x4

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v6

    const/4 v4, 0x5

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v7

    const/4 v4, 0x2

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v8

    const/4 v4, 0x3

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v9

    const/4 v4, 0x6

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v10

    const/16 v4, 0x8

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v11

    const/4 v4, 0x7

    invoke-interface {v1, v4}, Landroid/database/Cursor;->getString(I)Ljava/lang/String;

    move-result-object v12

    move-object v4, v3

    invoke-direct/range {v4 .. v12}, Lcom/filapp/models/Message;-><init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V

    .line 106
    invoke-interface {v0, v3}, Ljava/util/List;->add(Ljava/lang/Object;)Z

    .line 107
    invoke-interface {v1}, Landroid/database/Cursor;->moveToNext()Z

    add-int/lit8 v2, v2, 0x1

    goto :goto_0

    .line 109
    :cond_0
    invoke-interface {v1}, Landroid/database/Cursor;->close()V

    return-object v0
.end method

.method public getnumunreadmessages(Ljava/lang/String;Ljava/lang/String;)I
    .locals 3

    .line 145
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 146
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "SELECT * FROM messages WHERE (deliverystatus=\'2\' OR deliverystatus=\'-1\') AND chatid=\'"

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string p1, "\' AND receiverid=\'"

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string p1, "\'"

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p1

    const/4 p2, 0x0

    invoke-virtual {v0, p1, p2}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object p1

    .line 147
    invoke-interface {p1}, Landroid/database/Cursor;->getCount()I

    move-result p1

    return p1
.end method

.method public getnumuntotalreadmessages(Ljava/lang/String;)I
    .locals 3

    .line 151
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 152
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    new-instance v1, Ljava/lang/StringBuilder;

    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V

    const-string v2, "SELECT * FROM messages WHERE deliverystatus=\'2\' AND receiverid=\'"

    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string p1, "\'"

    invoke-virtual {v1, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p1

    const/4 v1, 0x0

    invoke-virtual {v0, p1, v1}, Landroid/database/sqlite/SQLiteDatabase;->rawQuery(Ljava/lang/String;[Ljava/lang/String;)Landroid/database/Cursor;

    move-result-object p1

    .line 153
    invoke-interface {p1}, Landroid/database/Cursor;->getCount()I

    move-result p1

    return p1
.end method

.method public insertMessage(Lcom/filapp/models/Message;)V
    .locals 6

    .line 48
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 49
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "mymessage"

    .line 50
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getMessage()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "senderid"

    .line 51
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getSenderid()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "receiverid"

    .line 52
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getReceiverid()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "time"

    .line 53
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getTime()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "deliverystatus"

    .line 54
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getDeliverystatus()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "msgtype"

    .line 55
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getMsgtype()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "chatid"

    .line 56
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getChatid()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "servmsgid"

    .line 57
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getServmsgid()Ljava/lang/String;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v1, "MYDEBUG"

    .line 58
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "insertMessage: "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-static {v1, v2}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I

    .line 59
    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v2, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const/4 v3, 0x0

    invoke-virtual {v1, v2, v3, v0}, Landroid/database/sqlite/SQLiteDatabase;->insert(Ljava/lang/String;Ljava/lang/String;Landroid/content/ContentValues;)J

    .line 61
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getMsgtype()Ljava/lang/String;

    move-result-object v0

    const-string v1, "1"

    invoke-virtual {v0, v1}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z

    move-result v0

    const/4 v1, 0x0

    if-eqz v0, :cond_0

    const-string v0, "voice note..."

    goto :goto_0

    .line 64
    :cond_0
    invoke-virtual {p1}, Lcom/filapp/models/Message;->getMessage()Ljava/lang/String;

    move-result-object v0

    const-string v2, "\n"

    .line 65
    invoke-virtual {v0, v2}, Ljava/lang/String;->contains(Ljava/lang/CharSequence;)Z

    move-result v2

    if-eqz v2, :cond_1

    const-string v2, "\n"

    .line 66
    invoke-virtual {v0, v2}, Ljava/lang/String;->indexOf(Ljava/lang/String;)I

    move-result v2

    invoke-virtual {v0, v1, v2}, Ljava/lang/String;->substring(II)Ljava/lang/String;

    move-result-object v0

    goto :goto_0

    .line 67
    :cond_1
    invoke-virtual {v0}, Ljava/lang/String;->length()I

    move-result v2

    const/16 v3, 0x14

    if-le v2, v3, :cond_2

    .line 68
    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    invoke-virtual {v0, v1, v3}, Ljava/lang/String;->substring(II)Ljava/lang/String;

    move-result-object v0

    invoke-virtual {v2, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v0, "..."

    invoke-virtual {v2, v0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v0

    .line 70
    :cond_2
    :goto_0
    new-instance v2, Landroid/content/ContentValues;

    invoke-direct {v2}, Landroid/content/ContentValues;-><init>()V

    const-string v3, "lastmessage"

    .line 71
    invoke-virtual {v2, v3, v0}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string v0, "lastmsgtime"

    .line 72
    invoke-static {}, Ljava/util/Calendar;->getInstance()Ljava/util/Calendar;

    move-result-object v3

    invoke-virtual {v3}, Ljava/util/Calendar;->getTimeInMillis()J

    move-result-wide v3

    invoke-static {v3, v4}, Ljava/lang/String;->valueOf(J)Ljava/lang/String;

    move-result-object v3

    invoke-virtual {v2, v0, v3}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 73
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    const-string v3, "allchats"

    const-string v4, "servchatid=?"

    const/4 v5, 0x1

    new-array v5, v5, [Ljava/lang/String;

    invoke-virtual {p1}, Lcom/filapp/models/Message;->getChatid()Ljava/lang/String;

    move-result-object p1

    aput-object p1, v5, v1

    invoke-virtual {v0, v3, v2, v4, v5}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    .line 74
    iget-object p1, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    invoke-virtual {p1}, Landroid/database/sqlite/SQLiteDatabase;->close()V

    return-void
.end method

.method public msgSentToSever(Ljava/lang/String;Ljava/lang/String;)V
    .locals 5

    .line 114
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 115
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "servmsgid"

    .line 116
    invoke-virtual {v0, v1, p2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    const-string p2, "deliverystatus"

    const-string v1, "1"

    .line 117
    invoke-virtual {v0, p2, v1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 118
    iget-object p2, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v2, "servmsgid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {p2, v1, v0, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method

.method public onCreate(Landroid/database/sqlite/SQLiteDatabase;)V
    .locals 2

    .line 34
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->MYTAG:Ljava/lang/String;

    const-string v1, "onCreate: "

    invoke-static {v0, v1}, Landroid/util/Log;->d(Ljava/lang/String;Ljava/lang/String;)I

    const-string v0, "CREATE table allchats(chatid INTEGER PRIMARY KEY AUTOINCREMENT,servchatid text,senderid text,receiverid text,active text NOT NULL DEFAULT \'0\',notifications INTEGER NOT NULL DEFAULT 0,time text,background text  NOT NULL DEFAULT \'0\',ismute text  NOT NULL DEFAULT \'0\',isrevealed text  NOT NULL DEFAULT \'0\',username text  NOT NULL DEFAULT \'0\',profilepicid text  NOT NULL DEFAULT \'0\',lastmessage text NOT NULL DEFAULT \'\',lastmsgtime text,isdeleted NOT NULL DEFAULT \'0\')"

    .line 35
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    const-string v0, "CREATE table messages(msgid INTEGER PRIMARY KEY AUTOINCREMENT,servmsgid text,chatid text,mymessage text,senderid text,receiverid text,deliverystatus text,msgtype text,time text,deliverytime text,readtimetext)"

    .line 36
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    const-string v0, "CREATE table notifications(notid INTEGER PRIMARY KEY AUTOINCREMENT,serrequestid text,hostuserid text,nottype text,nottime text,isread INTEGER NOT NULL DEFAULT 0,isclicked INTEGER NOT NULL DEFAULT 0,username text  NOT NULL DEFAULT \'0\',profilepicid text  NOT NULL DEFAULT \'0\')"

    .line 37
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    const-string v0, "CREATE table daterequests(reqid INTEGER PRIMARY KEY AUTOINCREMENT,serreqid text,hostid text,status text,deliverystatus text,time text)"

    .line 38
    invoke-virtual {p1, v0}, Landroid/database/sqlite/SQLiteDatabase;->execSQL(Ljava/lang/String;)V

    return-void
.end method

.method public onUpgrade(Landroid/database/sqlite/SQLiteDatabase;II)V
    .locals 0

    return-void
.end method

.method public updateMessageRead(Ljava/lang/String;I)V
    .locals 5

    .line 131
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 132
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "deliverystatus"

    .line 133
    invoke-static {p2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object p2

    invoke-virtual {v0, v1, p2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Integer;)V

    .line 134
    iget-object p2, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v2, "servmsgid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {p2, v1, v0, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method

.method public updatestatustodelivered(Ljava/lang/String;Ljava/lang/String;)V
    .locals 5

    .line 123
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 124
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "deliverystatus"

    .line 125
    invoke-virtual {v0, v1, p2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 126
    iget-object p2, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v2, "servmsgid=? AND (deliverystatus=\'0\' OR deliverystatus=\'1\')"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {p2, v1, v0, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method

.method public updatestatustoread(Ljava/lang/String;)V
    .locals 6

    .line 138
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object v0

    iput-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 139
    new-instance v0, Landroid/content/ContentValues;

    invoke-direct {v0}, Landroid/content/ContentValues;-><init>()V

    const-string v1, "deliverystatus"

    const/4 v2, 0x3

    .line 140
    invoke-static {v2}, Ljava/lang/Integer;->valueOf(I)Ljava/lang/Integer;

    move-result-object v2

    invoke-virtual {v0, v1, v2}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/Integer;)V

    .line 141
    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v2, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v3, "servmsgid=?"

    const/4 v4, 0x1

    new-array v4, v4, [Ljava/lang/String;

    const/4 v5, 0x0

    aput-object p1, v4, v5

    invoke-virtual {v1, v2, v0, v3, v4}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method

.method public updatetosenttoserver(Ljava/lang/String;I)V
    .locals 5

    .line 157
    invoke-virtual {p0}, Lcom/filapp/databases/Messagesdb;->getWritableDatabase()Landroid/database/sqlite/SQLiteDatabase;

    move-result-object p2

    iput-object p2, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    .line 158
    new-instance p2, Landroid/content/ContentValues;

    invoke-direct {p2}, Landroid/content/ContentValues;-><init>()V

    const-string v0, "deliverystatus"

    const-string v1, "0"

    .line 159
    invoke-virtual {p2, v0, v1}, Landroid/content/ContentValues;->put(Ljava/lang/String;Ljava/lang/String;)V

    .line 160
    iget-object v0, p0, Lcom/filapp/databases/Messagesdb;->database:Landroid/database/sqlite/SQLiteDatabase;

    iget-object v1, p0, Lcom/filapp/databases/Messagesdb;->table:Ljava/lang/String;

    const-string v2, "servmsgid=?"

    const/4 v3, 0x1

    new-array v3, v3, [Ljava/lang/String;

    const/4 v4, 0x0

    aput-object p1, v3, v4

    invoke-virtual {v0, v1, p2, v2, v3}, Landroid/database/sqlite/SQLiteDatabase;->update(Ljava/lang/String;Landroid/content/ContentValues;Ljava/lang/String;[Ljava/lang/String;)I

    return-void
.end method
